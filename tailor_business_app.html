<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inini Designer Studio</title>
  <style>
    body { font-family: Arial, sans-serif; background: linear-gradient(135deg,#667eea,#764ba2); margin: 0; padding: 20px; }
    .container { max-width: 1400px; margin: 0 auto; background: #fff; border-radius: 15px; padding: 20px; }
    .header { text-align: center; padding: 20px; background: linear-gradient(135deg,#4facfe,#00f2fe); color: #fff; border-radius: 10px; }
    .search-section { display: flex; gap: 10px; margin: 20px 0; }
    .search-bar { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
    .create-btn { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .order-form { display: none; background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
    .form-section { background: #fff; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
    .section-title { font-weight: bold; margin-bottom: 10px; background: #00aaff; color: white; padding: 10px; border-radius: 5px; }
    .form-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap: 15px; }
    .form-group { display: flex; flex-direction: column; }
    .form-group label { font-weight: bold; margin-bottom: 5px; }
    .form-group input, .form-group textarea, .form-group select { padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
    .submit-btn { background: #764ba2; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; }
    .order-card { background: #fff; padding: 15px; border-radius: 10px; margin: 10px 0; border-left: 5px solid #4facfe; box-shadow: 0 2px 6px rgba(0,0,0,.1); }
    .order-header { display: flex; justify-content: space-between; }
    .action-buttons { display: flex; gap: 10px; }
    .review-btn { background: #17a2b8; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    .delete-btn { background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    .review-modal, .confirmation-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,.5); }
    .modal-content {
      background: #fff;
      margin: 5% auto;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 800px;
      max-height: 80vh;        /* limit height */
      overflow-y: auto;        /* scroll if content too long */
    }
    .close-modal { float: right; cursor: pointer; font-size: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    table, th, td { border: 1px solid #ddd; }
    th, td { padding: 8px; text-align: left; }
    th { background: #f2f2f2; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Inini Designer Studio</h1>
      <p>Customer & Order Management</p>
    </div>

    <div class="search-section">
      <input type="text" id="searchBar" class="search-bar" placeholder="Search orders...">
      <button class="create-btn" onclick="showOrderForm()">Create New Order</button>
    </div>

    <!-- Order Form -->
    <div id="orderForm" class="order-form">
      <form id="customerForm">
        <!-- Customer Info -->
        <div class="form-section">
          <div class="section-title">Customer Information</div>
          <div class="form-grid">
            <div class="form-group"><label>Customer Name *</label><input type="text" id="customerName" required></div>
            <div class="form-group"><label>Order Number *</label><input type="text" id="orderNumber" required></div>
            <div class="form-group"><label>Mobile Number *</label><input type="tel" id="mobileNumber" required pattern="[0-9]{10}"></div>
            <div class="form-group"><label>Address</label><textarea id="address"></textarea></div>
          </div>
        </div>

        <!-- Garment Info -->
        <div class="form-section">
          <div class="section-title">Garment Information</div>
          <div class="form-grid">
            <div class="form-group">
              <label>Type of Garment</label>
              <select id="garmentType">
                <option value="">Select</option>
                <option>Shirt</option>
                <option>Blouse</option>
                <option>Kurti</option>
                <option>Pant</option>
                <option>Lehenga</option>
                <option>Saree Blouse</option>
              </select>
            </div>
            <div class="form-group">
              <label>Neckline</label>
              <select id="neckline">
                <option value="">Select</option>
                <option>Round</option>
                <option>V-Neck</option>
                <option>Boat Neck</option>
                <option>Square</option>
                <option>Collared</option>
              </select>
            </div>
            <div class="form-group">
              <label>Design Details</label>
              <select id="designDetails">
                <option value="">Select</option>
                <option>Plain</option>
                <option>Embroidery</option>
                <option>Printed</option>
                <option>Stone Work</option>
                <option>Custom</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Measurements -->
        <div class="form-section">
          <div class="section-title">Measurements</div>
          <div class="form-grid">
            <div class="form-group"><label>Height</label><input type="text" id="height"></div>
            <div class="form-group"><label>Shoulder</label><input type="text" id="shoulder"></div>
            <div class="form-group"><label>Armhole</label><input type="text" id="armhole"></div>
            <div class="form-group"><label>Biceps</label><input type="text" id="biceps"></div>
            <div class="form-group"><label>Sleeve Length</label><input type="text" id="sleeveLength"></div>
            <div class="form-group"><label>Sleeve Width</label><input type="text" id="sleeveWidth"></div>
            <div class="form-group"><label>Back Neck</label><input type="text" id="backNeck"></div>
            <div class="form-group"><label>Front Neck</label><input type="text" id="frontNeck"></div>
            <div class="form-group"><label>Collar</label><input type="text" id="collar"></div>
            <div class="form-group"><label>Chest</label><input type="text" id="chest"></div>
            <div class="form-group"><label>Waist</label><input type="text" id="waist"></div>
            <div class="form-group"><label>Dart</label><input type="text" id="dart"></div>
            <div class="form-group"><label>Hip</label><input type="text" id="hip"></div>
            <div class="form-group"><label>Seat</label><input type="text" id="seat"></div>
            <div class="form-group"><label>Bottom Height</label><input type="text" id="bottomHeight"></div>
            <div class="form-group"><label>Ankle Round</label><input type="text" id="ankleRound"></div>
            <div class="form-group"><label>Calf Round</label><input type="text" id="calfRound"></div>
            <div class="form-group"><label>Knee Round</label><input type="text" id="kneeRound"></div>
            <div class="form-group"><label>Crotch</label><input type="text" id="crotch"></div>
          </div>
        </div>

        <!-- Price -->
        <div class="form-section">
          <div class="section-title">Price</div>
          <div class="form-grid">
            <div class="form-group"><label>Advance Price (₹)</label><input type="number" id="advancePrice"></div>
            <div class="form-group"><label>Remaining Price (₹)</label><input type="number" id="price"></div>
            <div class="form-group"><label>Total Price (₹)</label><input type="number" id="totalPrice" readonly></div>
          </div>
        </div>

        <div class="submit-section"><button type="button" class="submit-btn" onclick="createOrder()">Create Order</button></div>
      </form>
    </div>

    <div class="orders-section">
      <h2>Customer Orders</h2>
      <div id="ordersList"></div>
    </div>
  </div>

  <!-- Review Modal -->
  <div id="reviewModal" class="review-modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeReviewModal()">&times;</span>
      <div id="reviewContent"></div>
    </div>
  </div>

  <!-- Delete Modal -->
  <div id="confirmationModal" class="confirmation-modal">
    <div class="modal-content">
      <h3>Delete Order</h3>
      <p>Are you sure?</p>
      <button onclick="confirmDelete()">Yes</button>
      <button onclick="cancelDelete()">No</button>
    </div>
  </div>

  <script>
    let orders = [];
    let orderToDelete = null;

    // Auto calculate total
    document.getElementById('advancePrice').addEventListener('input', calcTotal);
    document.getElementById('price').addEventListener('input', calcTotal);
    function calcTotal() {
      const adv = parseFloat(document.getElementById('advancePrice').value) || 0;
      const rem = parseFloat(document.getElementById('price').value) || 0;
      document.getElementById('totalPrice').value = adv + rem;
    }

    function showOrderForm() {
      document.getElementById('orderForm').style.display = 'block';
      document.getElementById('orderNumber').value = "ORD" + Date.now();
    }

    function createOrder() {
      const order = {
        id: Date.now(),
        customerName: document.getElementById('customerName').value,
        orderNumber: document.getElementById('orderNumber').value,
        mobileNumber: document.getElementById('mobileNumber').value,
        address: document.getElementById('address').value,
        garmentType: document.getElementById('garmentType').value,
        neckline: document.getElementById('neckline').value,
        designDetails: document.getElementById('designDetails').value,
        height: document.getElementById('height').value,
        shoulder: document.getElementById('shoulder').value,
        armhole: document.getElementById('armhole').value,
        biceps: document.getElementById('biceps').value,
        sleeveLength: document.getElementById('sleeveLength').value,
        sleeveWidth: document.getElementById('sleeveWidth').value,
        backNeck: document.getElementById('backNeck').value,
        frontNeck: document.getElementById('frontNeck').value,
        collar: document.getElementById('collar').value,
        chest: document.getElementById('chest').value,
        waist: document.getElementById('waist').value,
        dart: document.getElementById('dart').value,
        hip: document.getElementById('hip').value,
        seat: document.getElementById('seat').value,
        bottomHeight: document.getElementById('bottomHeight').value,
        ankleRound: document.getElementById('ankleRound').value,
        calfRound: document.getElementById('calfRound').value,
        kneeRound: document.getElementById('kneeRound').value,
        crotch: document.getElementById('crotch').value,
        advancePrice: document.getElementById('advancePrice').value,
        price: document.getElementById('price').value,
        totalPrice: document.getElementById('totalPrice').value,
        createdAt: new Date().toLocaleString()
      };
      orders.push(order);
      localStorage.setItem("orders", JSON.stringify(orders));
      refreshOrders();
      document.getElementById('customerForm').reset();
      document.getElementById('orderForm').style.display = 'none';
    }

    function refreshOrders() {
      document.getElementById('ordersList').innerHTML = "";
      orders.forEach(o => {
        const card = document.createElement('div');
        card.className = 'order-card';
        card.innerHTML = `
          <div class="order-header">
            <h3>${o.customerName} - ${o.orderNumber}</h3>
            <div class="action-buttons">
              <button class="review-btn" onclick="reviewOrder(${o.id})">Review</button>
              <button class="delete-btn" onclick="deleteOrder(${o.id})">Delete</button>
            </div>
          </div>
          <p><strong>Mobile:</strong> ${o.mobileNumber}</p>
          <p><strong>Garment:</strong> ${o.garmentType}</p>
          <p><strong>Total:</strong> ₹${o.totalPrice}</p>`;
        document.getElementById('ordersList').appendChild(card);
      });
    }

    function reviewOrder(id) {
      const o = orders.find(or => or.id === id);
      document.getElementById('reviewContent').innerHTML = `
        <h2>Order Review: ${o.orderNumber}</h2>
        <table>
          <tr><th colspan="2">Customer Info</th></tr>
          <tr><td>Name</td><td>${o.customerName}</td></tr>
          <tr><td>Mobile</td><td>${o.mobileNumber}</td></tr>
          <tr><td>Address</td><td>${o.address}</td></tr>

          <tr><th colspan="2">Garment Info</th></tr>
          <tr><td>Type</td><td>${o.garmentType}</td></tr>
          <tr><td>Neckline</td><td>${o.neckline}</td></tr>
          <tr><td>Design</td><td>${o.designDetails}</td></tr>

          <tr><th colspan="2">Measurements</th></tr>
          <tr><td>Height</td><td>${o.height}</td></tr>
          <tr><td>Shoulder</td><td>${o.shoulder}</td></tr>
          <tr><td>Armhole</td><td>${o.armhole}</td></tr>
          <tr><td>Biceps</td><td>${o.biceps}</td></tr>
          <tr><td>Sleeve Length</td><td>${o.sleeveLength}</td></tr>
          <tr><td>Sleeve Width</td><td>${o.sleeveWidth}</td></tr>
          <tr><td>Back Neck</td><td>${o.backNeck}</td></tr>
          <tr><td>Front Neck</td><td>${o.frontNeck}</td></tr>
          <tr><td>Collar</td><td>${o.collar}</td></tr>
          <tr><td>Chest</td><td>${o.chest}</td></tr>
          <tr><td>Waist</td><td>${o.waist}</td></tr>
          <tr><td>Dart</td><td>${o.dart}</td></tr>
          <tr><td>Hip</td><td>${o.hip}</td></tr>
          <tr><td>Seat</td><td>${o.seat}</td></tr>
          <tr><td>Bottom Height</td><td>${o.bottomHeight}</td></tr>
          <tr><td>Ankle Round</td><td>${o.ankleRound}</td></tr>
          <tr><td>Calf Round</td><td>${o.calfRound}</td></tr>
          <tr><td>Knee Round</td><td>${o.kneeRound}</td></tr>
          <tr><td>Crotch</td><td>${o.crotch}</td></tr>

          <tr><th colspan="2">Price</th></tr>
          <tr><td>Advance</td><td>₹${o.advancePrice}</td></tr>
          <tr><td>Remaining</td><td>₹${o.price}</td></tr>
          <tr><td>Total</td><td>₹${o.totalPrice}</td></tr>

          <tr><td>Created At</td><td>${o.createdAt}</td></tr>
        </table>
      `;
      document.getElementById('reviewModal').style.display = 'block';
    }

    function closeReviewModal(){ document.getElementById('reviewModal').style.display='none'; }

    function deleteOrder(id) {
      orderToDelete = id;
      document.getElementById('confirmationModal').style.display = 'block';
    }
    function confirmDelete(){
      orders = orders.filter(o=>o.id!==orderToDelete);
      localStorage.setItem("orders", JSON.stringify(orders));
      refreshOrders();
      document.getElementById('confirmationModal').style.display='none';
    }
    function cancelDelete(){ document.getElementById('confirmationModal').style.display='none'; }

    // Search
    document.getElementById('searchBar').addEventListener('input', function(){
      const val = this.value.toLowerCase();
      const filtered = orders.filter(o =>
        o.customerName.toLowerCase().includes(val) ||
        o.orderNumber.toLowerCase().includes(val) ||
        o.mobileNumber.includes(val) ||
        o.garmentType.toLowerCase().includes(val)
      );
      document.getElementById('ordersList').innerHTML="";
      filtered.forEach(o=>{
        const card=document.createElement('div');
        card.className='order-card';
        card.innerHTML=`<div class="order-header"><h3>${o.customerName} - ${o.orderNumber}</h3>
        <div class="action-buttons"><button class="review-btn" onclick="reviewOrder(${o.id})">Review</button>
        <button class="delete-btn" onclick="deleteOrder(${o.id})">Delete</button></div></div>
        <p><strong>Mobile:</strong> ${o.mobileNumber}</p><p><strong>Garment:</strong> ${o.garmentType}</p><p><strong>Total:</strong> ₹${o.totalPrice}</p>`;
        document.getElementById('ordersList').appendChild(card);
      });
    });

    // Load saved orders
    window.onload=function(){
      const saved=localStorage.getItem("orders");
      if(saved){ orders=JSON.parse(saved); refreshOrders(); }
    }
  </script>
</body>
</html>
